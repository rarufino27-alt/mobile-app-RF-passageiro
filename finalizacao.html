<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Finalização da Corrida</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --rf-gold:#D6B85F;
  --rf-gold-strong:#F0D98A;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;}

body{
  background: radial-gradient(circle at top,#1A2133 0%,#080A12 70%);
  color:#fff;
  animation:fadeIn .4s ease;
}

@keyframes fadeIn{
  from{opacity:0;transform:scale(1.02);}
  to{opacity:1;transform:scale(1);}
}

.header{
  padding:20px;
  font-weight:700;
  font-size:18px;
}

.resumo{
  margin:20px;
  padding:20px;
  border-radius:22px;
  background:#151B2B;
  border:1px solid rgba(214,184,95,.2);
  font-size:14px;
  line-height:1.7;
}

.resumo strong{
  color:var(--rf-gold-strong);
}

.titulo-avaliacao{
  text-align:center;
  margin-top:20px;
  font-size:16px;
}

.estrelas{
  display:flex;
  justify-content:center;
  gap:10px;
  font-size:28px;
  margin:15px 0;
  cursor:pointer;
}

.estrela{
  color:#555;
  transition:.2s;
}

.estrela.ativa{
  color:var(--rf-gold-strong);
}

textarea{
  width:calc(100% - 40px);
  margin:10px 20px;
  padding:14px;
  border-radius:18px;
  border:none;
  background:#111522;
  color:#fff;
  resize:none;
  min-height:80px;
}

button{
  margin:20px;
  padding:16px;
  width:calc(100% - 40px);
  border:none;
  border-radius:40px;
  background:linear-gradient(135deg,var(--rf-gold),var(--rf-gold-strong));
  font-weight:700;
  font-size:15px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="header">Corrida Finalizada</div>

<div class="resumo" id="resumoFinal"></div>

<div class="titulo-avaliacao">
  Como foi sua experiência?
</div>

<div class="estrelas" id="estrelas">
  <div class="estrela" data-valor="1">★</div>
  <div class="estrela" data-valor="2">★</div>
  <div class="estrela" data-valor="3">★</div>
  <div class="estrela" data-valor="4">★</div>
  <div class="estrela" data-valor="5">★</div>
</div>

<textarea id="comentario" placeholder="Deseja comentar algo sobre a viagem? (opcional)"></textarea>

<button onclick="finalizar()">Finalizar</button>

<script>

const corrida = JSON.parse(localStorage.getItem("rf_corrida_temp"));
if(!corrida) window.location.href="home.html";

document.getElementById("resumoFinal").innerHTML = `
<strong>Origem:</strong> ${corrida.origem}<br>
${corrida.parada?`<strong>Parada:</strong> ${corrida.parada}<br>`:""}
<strong>Destino:</strong> ${corrida.destino}<br>
<strong>Valor pago:</strong> R$ ${(corrida.valorFinal || corrida.total).toFixed(2)}<br>
<strong>Tempo de viagem:</strong> ${corrida.tempoViagem || 0} minutos
`;

let nota = 0;

document.querySelectorAll(".estrela").forEach(estrela=>{
  estrela.onclick = ()=>{
    nota = Number(estrela.dataset.valor);
    atualizarEstrelas();
  };
});

function atualizarEstrelas(){
  document.querySelectorAll(".estrela").forEach(e=>{
    if(Number(e.dataset.valor) <= nota){
      e.classList.add("ativa");
    }else{
      e.classList.remove("ativa");
    }
  });
}

function finalizar(){

  const comentario = document.getElementById("comentario").value;

  const avaliacao = {
    nota,
    comentario
  };

  console.log("Avaliação salva:", avaliacao);

  localStorage.removeItem("rf_corrida_temp");

  window.location.href="home.html";
}

</script>

</body>
</html>