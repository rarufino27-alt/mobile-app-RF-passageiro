<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RF – Indo até Passageiro</title>

<style>
:root{
  --preto:#0f0f0f;
  --branco:#ffffff;
  --amarelo:#facc15;
  --verde:#22c55e;
  --vermelho:#ef4444;
}

body{
  margin:0;
  background:var(--preto);
  color:var(--branco);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  overflow:hidden;
}

/* TOPO */
.top{
  background:#fff;
  padding:20px;
  border-bottom-left-radius:35px;
  border-bottom-right-radius:35px;
  color:#000;
}

.top strong{
  color:var(--amarelo);
}

/* ORIGEM CARD */
.origem-card{
  background:#1c1c1c;
  margin:15px;
  padding:18px;
  border-radius:18px;
}

.label{
  font-size:12px;
  opacity:.6;
}

.valor{
  font-weight:700;
  margin-top:5px;
}

/* MAPA */
#map{
  position:absolute;
  top:150px;
  left:0;
  right:0;
  bottom:180px;
  background:#111;
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:.5;
}

/* BOTTOM */
.bottom{
  position:absolute;
  bottom:0;
  width:100%;
  background:#0f0f0f;
  padding:20px;
  border-top-left-radius:25px;
  border-top-right-radius:25px;
  box-shadow:0 -10px 30px rgba(0,0,0,.6);
}

.btn{
  width:100%;
  padding:16px;
  border:none;
  border-radius:18px;
  font-weight:700;
  font-size:16px;
  margin-top:10px;
  cursor:pointer;
}

.btn-nav{
  background:#1c1c1c;
  border:1px solid #333;
  color:#fff;
}

.btn-principal{
  background:var(--verde);
  color:#fff;
}

.btn-cancelar{
  background:#111;
  color:#fff;
  border:1px solid #333;
}

/* PASSAGEIRO INFO */
.passageiro-info{
  display:none;
  background:#1c1c1c;
  padding:15px;
  border-radius:15px;
  margin-top:10px;
  font-size:14px;
}
</style>
</head>
<body>

<div class="top">
  Status: <strong>Indo até passageiro</strong>
</div>

<div class="origem-card">
  <div class="label">ORIGEM</div>
  <div class="valor" id="origemInfo"></div>
</div>

<div id="map">
  Mapa será integrado aqui
</div>

<div class="bottom">

  <button class="btn btn-nav" onclick="abrirNavegacao()">
    Navegar até passageiro
  </button>

  <button class="btn btn-principal" onclick="toggleInfo()">
    Encontrar com <span id="nomePassageiro"></span>
  </button>

  <div class="passageiro-info" id="infoPassageiro">
    Telefone: 9xxxx-xxxx <br><br>
    <button class="btn btn-nav" onclick="ligar()">Ligar</button>
    <button class="btn btn-nav" onclick="mensagem()">Enviar Mensagem</button>
  </div>

  <button class="btn btn-cancelar" onclick="cancelar()">
    Cancelar Corrida
  </button>

</div>

<script>

let corrida = JSON.parse(localStorage.getItem("corrida_ativa"));

if(!corrida){
  window.location.href="driver-home.html";
}

document.getElementById("origemInfo").innerText=corrida.origem;
document.getElementById("nomePassageiro").innerText=corrida.passageiro || "Passageiro";

function toggleInfo(){
  const box=document.getElementById("infoPassageiro");
  box.style.display = box.style.display==="block" ? "none" : "block";
}

function abrirNavegacao(){
  const destino=encodeURIComponent(corrida.origem);

  const waze="waze://?q="+destino+"&navigate=yes";
  const google="https://www.google.com/maps/dir/?api=1&destination="+destino;

  window.location.href=waze;
  setTimeout(()=>{
    window.location.href=google;
  },1200);
}

function ligar(){
  alert("Em breve com máscara de número integrada.");
}

function mensagem(){
  alert("Chat interno será integrado.");
}

function cancelar(){
  localStorage.removeItem("corrida_ativa");
  window.location.href="driver-home.html";
}

</script>

</body>
</html>