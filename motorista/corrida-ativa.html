<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RF ‚Äì Indo at√© Passageiro</title>

<style>
:root{
  --preto:#0f0f0f;
  --branco:#ffffff;
  --amarelo:#facc15;
  --verde:#22c55e;
  --vermelho:#ef4444;
}

body{
  margin:0;
  background:var(--preto);
  color:var(--branco);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  overflow:hidden;
}

/* TOPO */
.top{
  background:#fff;
  padding:25px 20px 30px;
  border-bottom-left-radius:35px;
  border-bottom-right-radius:35px;
  color:#000;
  min-height:140px;
}

.top strong{
  color:var(--amarelo);
}

/* MAPA */
#map{
  position:absolute;
  top:180px;
  left:0;
  right:0;
  bottom:180px;
  background:#111;
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:.5;
}

/* BOTTOM */
.bottom{
  position:absolute;
  bottom:0;
  width:100%;
  background:#0f0f0f;
  padding:20px;
  border-top-left-radius:25px;
  border-top-right-radius:25px;
  box-shadow:0 -10px 30px rgba(0,0,0,.6);
}

.btn{
  width:100%;
  padding:16px;
  border:none;
  border-radius:18px;
  font-weight:700;
  font-size:16px;
  margin-top:10px;
  cursor:pointer;
}

.btn-nav{
  background:#1c1c1c;
  border:1px solid #333;
  color:#fff;
}

.btn-principal{
  background:var(--verde);
  color:#fff;
}

.btn-cancelar{
  background:#111;
  color:#fff;
  border:1px solid #333;
}

/* PASSAGEIRO INFO */
.passageiro-info{
  display:none;
  background:#1c1c1c;
  padding:15px;
  border-radius:15px;
  margin-top:10px;
  font-size:14px;
}
</style>
</head>
<body>

<div class="top">

  <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;">
    <img src="../assets/icons/icon-192.png" style="height:28px;">
    <div style="font-weight:700;font-size:16px;">
      Viagem em Andamento
    </div>
  </div>

  <div style="font-size:12px;opacity:.6;">
    ORIGEM
  </div>

  <div id="origemTopo" 
       style="font-weight:800;
              font-size:18px;
              line-height:1.3;
              word-wrap:break-word;">
  </div>

  <!-- BOT√ÉO NAVEGA√á√ÉO MINIMALISTA -->
  <div style="margin-top:10px;">
    <button onclick="abrirNavegacao()" 
      style="
        background:none;
        border:none;
        color:#000;
        font-weight:600;
        font-size:14px;
        padding:0;
        cursor:pointer;
        display:flex;
        align-items:center;
        gap:6px;">
      üß≠ Navegar at√© passageiro
    </button>
  </div>

</div>

<div id="map">
  Mapa ser√° integrado aqui
</div>

<div class="bottom">

  <!-- BOT√ÉO PRINCIPAL -->
  <button class="btn btn-principal" onclick="cheguei()">
    Cheguei
  </button>

  <!-- PASSAGEIRO -->
  <button class="btn btn-nav" onclick="toggleInfo()">
    Encontrar com <span id="nomePassageiro"></span>
  </button>

  <div class="passageiro-info" id="infoPassageiro">
    Telefone: 9xxxx-xxxx <br><br>
    <button class="btn btn-nav" onclick="ligar()">Ligar</button>
    <button class="btn btn-nav" onclick="mensagem()">Enviar Mensagem</button>
  </div>

  <!-- CANCELAR -->
  <button class="btn btn-cancelar" onclick="cancelar()">
    Cancelar Corrida
  </button>

</div>

<script>

let corrida = JSON.parse(localStorage.getItem("corrida_ativa"));

if(!corrida){
  window.location.href="driver-home.html";
}

document.getElementById("origemTopo").innerText = corrida.origem;
document.getElementById("nomePassageiro").innerText = corrida.passageiro || "Passageiro";

function toggleInfo(){
  const box=document.getElementById("infoPassageiro");
  box.style.display = box.style.display==="block" ? "none" : "block";
}

function abrirNavegacao(){
  const destino=encodeURIComponent(corrida.origem);

  const waze="waze://?q="+destino+"&navigate=yes";
  const google="https://www.google.com/maps/dir/?api=1&destination="+destino;

  window.location.href=waze;

  setTimeout(()=>{
    window.location.href=google;
  },1200);
}

function cheguei(){
  window.location.href="viagem-andamento.html";
}

function ligar(){
  alert("Em breve com m√°scara de n√∫mero integrada.");
}

function mensagem(){
  alert("Chat interno ser√° integrado.");
}

function cancelar(){
  localStorage.removeItem("corrida_ativa");
  window.location.href="driver-home.html";
}

</script>

</body>
</html>