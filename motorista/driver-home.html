<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>RF – Painel Motorista</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
}

body{
  background:#0f0f0f;
  color:#fff;
  min-height:100vh;
}

/* HEADER */
.top{
  background:#ffffff;
  padding:25px 20px 65px;
  border-bottom-left-radius:40px;
  border-bottom-right-radius:40px;
}

.logo{
  font-weight:900;
  font-size:1.4rem;
  color:#000;
}

.status{
  margin-top:5px;
  font-weight:700;
  color:#facc15;
}

/* CONTENT */
.content{
  width:90%;
  max-width:420px;
  margin:-45px auto 120px auto;
}

.card{
  background:#1c1c1c;
  border-radius:20px;
  padding:22px;
  box-shadow:0 12px 30px rgba(0,0,0,.5);
  margin-bottom:15px;
}

.btn{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:none;
  font-weight:700;
  margin-top:10px;
  cursor:pointer;
}

.btn-online{ background:#facc15; color:#000; }
.btn-green{ background:#22c55e; color:#fff; }
.btn-red{ background:#ef4444; color:#fff; }
.btn-dark{ background:#111; color:#fff; border:1px solid #333; }

.valor{
  text-align:center;
  font-size:1.8rem;
  font-weight:800;
  color:#facc15;
  margin-bottom:8px;
}

.rota{
  text-align:center;
  font-size:.85rem;
  opacity:.8;
  margin-bottom:8px;
}

.timer{
  text-align:center;
  font-size:.75rem;
  color:#ef4444;
  margin-bottom:10px;
}

input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  margin-top:8px;
}
.hidden{ display:none; }
</style>
</head>
<body>

<div class="top">
  <div class="logo">MOTORISTA RF</div>
  <div class="status" id="statusBadge">Offline</div>
</div>

<div class="content">

  <!-- CONTROLE ONLINE -->
  <div class="card">
    <button class="btn btn-online" id="btnOnline" onclick="toggleOnline()">
      Ficar Online
    </button>
  </div>

  <!-- BOTÃO CORRIDA MANUAL -->
  <div class="card hidden" id="manualCard">
    <button class="btn btn-dark" onclick="abrirManual()">
      + Nova Corrida Manual
    </button>
  </div>

  <!-- FORM MANUAL -->
  <div class="card hidden" id="formManual">
    <input type="text" id="manualOrigem" placeholder="Origem">
    <input type="text" id="manualDestino" placeholder="Destino">
    <input type="number" id="manualValor" placeholder="Valor (R$)">
    <button class="btn btn-green" onclick="iniciarManual()">Iniciar Corrida</button>
    <button class="btn btn-dark" onclick="fecharManual()">Cancelar</button>
  </div>

  <!-- CORRIDA RECEBIDA -->
  <div class="card hidden" id="recebendoCard">
    <div class="valor" id="rideValor"></div>
    <div class="rota" id="rideRota"></div>
    <div class="timer" id="rideTimer"></div>
    <button class="btn btn-green" onclick="aceitarCorrida()">Aceitar</button>
    <button class="btn btn-red" onclick="recusarCorrida()">Recusar</button>
  </div>

  <!-- EM ANDAMENTO -->
  <div class="card hidden" id="andamentoCard">
    <div class="valor" id="andamentoValor"></div>
    <div class="rota" id="andamentoRota"></div>
    <button class="btn btn-green" onclick="finalizarCorrida()">Finalizar Corrida</button>
  </div>

  <!-- FINALIZADA -->
  <div class="card hidden" id="finalCard">
    <div class="valor" id="finalValor"></div>
    <button class="btn btn-dark" onclick="resetarPainel()">Voltar ao Painel</button>
  </div>

  <!-- SIMULAR CORRIDA -->
  <div class="card hidden" id="simularCard">
    <button class="btn btn-dark" onclick="simularCorrida()">
      Simular Corrida Recebida
    </button>
  </div>

</div>

<script>
let online=false;
let estado="OFFLINE";
let timerInterval=null;
let tempo=20;
let corridaAtual=null;

function setEstado(novo){
  estado=novo;

  document.querySelectorAll(".card").forEach(c=>c.classList.add("hidden"));

  if(estado==="OFFLINE"){
    document.getElementById("btnOnline").innerText="Ficar Online";
    document.getElementById("statusBadge").innerText="Offline";
    document.getElementById("statusBadge").style.color="#facc15";
  }

  if(estado==="ONLINE"){
    document.getElementById("manualCard").classList.remove("hidden");
    document.getElementById("simularCard").classList.remove("hidden");
  }

  if(estado==="RECEBENDO"){
    document.getElementById("recebendoCard").classList.remove("hidden");
  }

  if(estado==="ANDAMENTO"){
    document.getElementById("andamentoCard").classList.remove("hidden");
  }

  if(estado==="FINALIZADA"){
    document.getElementById("finalCard").classList.remove("hidden");
  }

  document.querySelector(".content > .card").classList.remove("hidden");
}

function toggleOnline(){
  online=!online;

  if(online){
    document.getElementById("btnOnline").innerText="Online";
    document.getElementById("btnOnline").classList.remove("btn-online");
    document.getElementById("btnOnline").classList.add("btn-green");
    document.getElementById("statusBadge").innerText="Online";
    document.getElementById("statusBadge").style.color="#22c55e";
    setEstado("ONLINE");
  }else{
    document.getElementById("btnOnline").classList.remove("btn-green");
    document.getElementById("btnOnline").classList.add("btn-online");
    setEstado("OFFLINE");
  }
}

function abrirManual(){
  document.getElementById("formManual").classList.remove("hidden");
}

function fecharManual(){
  document.getElementById("formManual").classList.add("hidden");
}

function iniciarManual(){
  const origem=document.getElementById("manualOrigem").value;
  const destino=document.getElementById("manualDestino").value;
  const valor=document.getElementById("manualValor").value;

  if(!origem||!destino||!valor){
    alert("Preencha todos os campos.");
    return;
  }

  corridaAtual={ origem,destino,valor };
  iniciarAndamento();
}

function simularCorrida(){
  corridaAtual={
    origem:"Centro",
    destino:"Aeroporto",
    valor:65
  };

  document.getElementById("rideValor").innerText="R$ "+corridaAtual.valor;
  document.getElementById("rideRota").innerText=corridaAtual.origem+" → "+corridaAtual.destino;

  tempo=20;
  document.getElementById("rideTimer").innerText="Tempo restante: 20s";

  timerInterval=setInterval(()=>{
    tempo--;
    document.getElementById("rideTimer").innerText="Tempo restante: "+tempo+"s";
    if(tempo<=0){
      clearInterval(timerInterval);
      recusarCorrida();
    }
  },1000);

  setEstado("RECEBENDO");
}

function aceitarCorrida(){
  clearInterval(timerInterval);
  iniciarAndamento();
}

function recusarCorrida(){
  clearInterval(timerInterval);
  corridaAtual=null;
  setEstado("ONLINE");
}

function iniciarAndamento(){
  document.getElementById("andamentoValor").innerText="R$ "+corridaAtual.valor;
  document.getElementById("andamentoRota").innerText=corridaAtual.origem+" → "+corridaAtual.destino;
  setEstado("ANDAMENTO");
}

function finalizarCorrida(){
  document.getElementById("finalValor").innerText="Corrida Finalizada - R$ "+corridaAtual.valor;
  setEstado("FINALIZADA");
}

function resetarPainel(){
  corridaAtual=null;
  setEstado("ONLINE");
}

setEstado("OFFLINE");
</script>

</body>
</html>