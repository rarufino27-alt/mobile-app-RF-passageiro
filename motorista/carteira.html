<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carteira - RF Motorista</title>

<link rel="stylesheet" href="../core/ui/layout.css">

<script src="../core/config.js"></script>
<script src="../core/datamanager.js"></script>
<script src="../core/ui/theme.js" defer></script>
<script src="../core/ui/sidebar.js" defer></script>

</head>
<body>

<aside id="sidebar" class="sidebar"></aside>
<div id="overlay" class="overlay"></div>

<header class="rf-top">
  <div class="menu-btn" onclick="toggleSidebar()">☰</div>
  <div>Carteira</div>
  <div class="credit-box">
    Créditos: <span id="creditosTopo">0.00</span>
  </div>
</header>

<main class="rf-body">

  <div class="rf-card" style="text-align:center;">
    <h3>Saldo de Créditos</h3>
    <h1 id="saldoCredito">0.00</h1>
  </div>

  <div class="rf-card">
    <h3>Recarregar Créditos</h3>
    <input type="number" id="valorRecarga" placeholder="Valor em R$" style="width:100%;padding:10px;margin-top:10px;border-radius:10px;border:none;">
    <button style="margin-top:15px;width:100%;padding:12px;border:none;border-radius:10px;background:#22c55e;color:#fff;font-weight:700;"
      onclick="recarregar()">
      Confirmar Recarga
    </button>
  </div>

  <div class="rf-card">
    <h3>Ganhos Hoje</h3>
    <h2>R$ <span id="ganhosHoje">0.00</span></h2>
  </div>

</main>

<script>
document.addEventListener("DOMContentLoaded", atualizarTela);

function atualizarTela(){
  const creditos = DataManager.getCreditos();
  const ganhos = DataManager.getGanhosHoje();

  document.getElementById("creditosTopo").innerText = creditos.toFixed(2);
  document.getElementById("saldoCredito").innerText = creditos.toFixed(2);
  document.getElementById("ganhosHoje").innerText = ganhos.toFixed(2);
}

function recarregar(){
  const valor = parseFloat(document.getElementById("valorRecarga").value);

  if(!valor || valor <= 0){
    alert("Informe um valor válido.");
    return;
  }

  const atual = DataManager.getCreditos();
  DataManager.setCreditos(atual + valor);

  alert("Créditos adicionados com sucesso!");
  atualizarTela();
}
</script>

</body>
</html>